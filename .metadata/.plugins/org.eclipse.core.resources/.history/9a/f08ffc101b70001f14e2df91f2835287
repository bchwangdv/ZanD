<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>THE ZD</title>
<!-- JQuery 3.7.1-->
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>
<!-- navbar -->
<div th:replace="~{navbar :: navbar}"></div>
<!-- css -->
<link type="text/css" href='css/home.css' rel="stylesheet">
<body>
<div class="halfline"></div>

<div>
<p id="bigLogo">The ZD</p>
<p id="phrase">NEXON FC Online Match Analyst</p>
</div>
<div class="searchbarContainer">
	<div class="searchbar">
		<form action="searchResult">
			<div class="input-group">
				<select class="form-select">
					<option selected>전체 검색</option>
					<option value="official1v1">공식 경기 1:1</option>
					<option value="official2v2">공식 경기 2:2</option>
					<option value="specialMatch">친선 경기</option>
				</select>
				<input id="nameInput" name="nickname" type="text" class="form-control" alt="계정명 입력창">
				<button id="searchBtn" class="btn btn-outline-secondary">Shoot!</button>
			</div>
		</form>
	</div>
</div>
<div class="resultContatiner">
	<div id="searchResult"></div>
</div>

</body>
<script>
const searchBtn = document.getElementById("searchBtn");

searchBtn.addEventListener('click', function(){
// 	const resultDiv = $("#searchResult");
// 	resultDiv.empty();
// 	const characterName = document.getElementById("nameInput").value;
// 	const ouidReq = "https://open.api.nexon.com/fconline/v1/id?nickname=" + characterName;
// 	const ouidObj = fetch(ouidReq, {
// 	    headers:{
// 	      "x-nxopen-api-key": API_KEY
// 	    }
// 	})
// 		.then(response => response.json())
// 		.then(data => {
// 			ouid = data.ouid
// 			const ouidInput = document.getElementById("ouidInput");
// 			ouidInput.value = ouid;
// 			const matchReq = "https://open.api.nexon.com/fconline/v1/user/match?ouid=" + ouid + "&matchtype=50";
// 			const matchIds = fetch(matchReq, {
// 				headers:{
// 					"x-nxopen-api-key": API_KEY
// 				}
// 			})
// 				.then(response => response.json())
// 				.then(data => {
// 					if(data == ""){
// 						const resultDiv = $("#searchResult");
// 						resultDiv.append("최근 공식경기가 없습니다.");
// 					} else {
// 						for(const matchDetailId of data) {
// 							const matchDetailReq = "https://open.api.nexon.com/fconline/v1/match-detail?matchid=" + matchDetailId;
// 							const matchDetail = fetch(matchDetailReq, {
// 								headers:{
// 									"x-nxopen-api-key": API_KEY
// 								}
// 							})
// 								.then(response => response.json())
// 								.then(data => {
// 									console.log(data)
									
// 									const resultDiv = $("#searchResult");
// 									const usersOuid = $("#ouidInput").val();
									
// 									var dateResult = document.createElement("div");
// 									var matchType = document.createElement("div");
// 									var opResult = document.createElement("div");
// 									var matchResult = document.createElement("div");
// 									resultDiv.append(dateResult);
// 									resultDiv.append(matchType);
// 									resultDiv.append(opResult);
// 									resultDiv.append(matchResult);
									
// 									dateResult.append("날짜 : " + data.matchDate);
// 									matchType.append("매치타입 : 공식경기");
// 									for(const myData of data.matchInfo) {
// 										if(myData.ouid != usersOuid) {
// 											opResult.append("상대 : " + myData.nickname);
// 										}
// 										if(myData.ouid == usersOuid) {
// 											matchResult.append("결과 : " + myData.matchDetail.matchResult);
// 										}
// 									}
// 									resultDiv.append("<hr/>");
									
// 								})
// 								.catch(error => console.error(error))
// 						}
// 					}
// 				})
// 				.catch(error => console.error(error))
// 		})
// 		.catch(error => console.error(error))
});
</script>
</html>